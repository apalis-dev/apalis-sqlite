{
  "db_name": "SQLite",
  "query": "SELECT\n    1 AS priority,\n    'Number' AS type,\n    'RUNNING_JOBS' AS statistic,\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Running' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    ) AS value\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    1,\n    'Number',\n    'PENDING_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Pending' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    2,\n    'Number',\n    'FAILED_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Failed' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    2,\n    'Number',\n    'ACTIVE_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status IN ('Pending', 'Running', 'Queued') THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    2,\n    'Number',\n    'STALE_RUNNING_JOBS',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nWHERE\n    status = 'Running'\n    AND run_at < strftime('%s', 'now', '-1 hour')\nUNION\nALL\nSELECT\n    2,\n    'Percentage',\n    'KILL_RATE',\n    CAST(\n        ROUND(\n            100.0 * SUM(\n                CASE\n                    WHEN status = 'Killed' THEN 1\n                    ELSE 0\n                END\n            ) / NULLIF(COUNT(*), 0),\n            2\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    3,\n    'Number',\n    'JOBS_PAST_HOUR',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-1 hour')\nUNION\nALL\nSELECT\n    3,\n    'Number',\n    'JOBS_TODAY',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nWHERE\n    date(run_at, 'unixepoch') = date('now')\nUNION\nALL\nSELECT\n    3,\n    'Number',\n    'KILLED_JOBS_TODAY',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Killed' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nWHERE\n    date(run_at, 'unixepoch') = date('now')\nUNION\nALL\nSELECT\n    3,\n    'Decimal',\n    'AVG_JOBS_PER_MINUTE_PAST_HOUR',\n    CAST(ROUND(COUNT(*) / 60.0, 2) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-1 hour')\nUNION\nALL\nSELECT\n    4,\n    'Number',\n    'TOTAL_JOBS',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    4,\n    'Number',\n    'DONE_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Done' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    4,\n    'Number',\n    'COMPLETED_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status IN ('Done', 'Failed', 'Killed') THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    4,\n    'Number',\n    'KILLED_JOBS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Killed' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    4,\n    'Percentage',\n    'SUCCESS_RATE',\n    CAST(\n        ROUND(\n            100.0 * SUM(\n                CASE\n                    WHEN status = 'Done' THEN 1\n                    ELSE 0\n                END\n            ) / NULLIF(COUNT(*), 0),\n            2\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    5,\n    'Decimal',\n    'AVG_JOB_DURATION_MINS',\n    CAST(ROUND(AVG((done_at - run_at) / 60.0), 2) AS REAL)\nFROM\n    Jobs\nWHERE\n    status IN ('Done', 'Failed', 'Killed')\n    AND done_at IS NOT NULL\nUNION\nALL\nSELECT\n    5,\n    'Decimal',\n    'LONGEST_RUNNING_JOB_MINS',\n    CAST(\n        ROUND(\n            MAX(\n                CASE\n                    WHEN status = 'Running' THEN (strftime('%s', 'now') - run_at) / 60.0\n                    ELSE 0\n                END\n            ),\n            2\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    5,\n    'Number',\n    'QUEUE_BACKLOG',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Pending'\n                AND run_at <= strftime('%s', 'now') THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    6,\n    'Number',\n    'JOBS_PAST_24_HOURS',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-1 day')\nUNION\nALL\nSELECT\n    6,\n    'Number',\n    'JOBS_PAST_7_DAYS',\n    CAST(COUNT(*) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-7 days')\nUNION\nALL\nSELECT\n    6,\n    'Number',\n    'KILLED_JOBS_PAST_7_DAYS',\n    CAST(\n        SUM(\n            CASE\n                WHEN status = 'Killed' THEN 1\n                ELSE 0\n            END\n        ) AS REAL\n    )\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-7 days')\nUNION\nALL\nSELECT\n    6,\n    'Percentage',\n    'SUCCESS_RATE_PAST_24H',\n    CAST(\n        ROUND(\n            100.0 * SUM(\n                CASE\n                    WHEN status = 'Done' THEN 1\n                    ELSE 0\n                END\n            ) / NULLIF(COUNT(*), 0),\n            2\n        ) AS REAL\n    )\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-1 day')\nUNION\nALL\nSELECT\n    7,\n    'Decimal',\n    'AVG_JOBS_PER_HOUR_PAST_24H',\n    CAST(ROUND(COUNT(*) / 24.0, 2) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-1 day')\nUNION\nALL\nSELECT\n    7,\n    'Decimal',\n    'AVG_JOBS_PER_DAY_PAST_7D',\n    CAST(ROUND(COUNT(*) / 7.0, 2) AS REAL)\nFROM\n    Jobs\nWHERE\n    run_at >= strftime('%s', 'now', '-7 days')\nUNION\nALL\nSELECT\n    8,\n    'Timestamp',\n    'MOST_RECENT_JOB',\n    CAST(MAX(run_at) AS REAL)\nFROM\n    Jobs\nUNION\nALL\nSELECT\n    8,\n    'Timestamp',\n    'OLDEST_PENDING_JOB',\n    CAST(MIN(run_at) AS REAL)\nFROM\n    Jobs\nWHERE\n    status = 'Pending'\n    AND run_at <= strftime('%s', 'now')\nUNION\nALL\nSELECT\n    8,\n    'Number',\n    'PEAK_HOUR_JOBS',\n    CAST(MAX(hourly_count) AS REAL)\nFROM\n    (\n        SELECT\n            COUNT(*) as hourly_count\n        FROM\n            Jobs\n        WHERE\n            run_at >= strftime('%s', 'now', '-1 day')\n        GROUP BY\n            strftime('%H', run_at, 'unixepoch')\n    )\nUNION\nALL\nSELECT\n    9,\n    'Number',\n    'DB_PAGE_SIZE',\n    CAST(page_size AS REAL)\nFROM\n    pragma_page_size()\nUNION\nALL\nSELECT\n    9,\n    'Number',\n    'DB_PAGE_COUNT',\n    CAST(page_count AS REAL)\nFROM\n    pragma_page_count()\nUNION\nALL\nSELECT\n    9,\n    'Number',\n    'DB_SIZE',\n    CAST(page_size * page_count AS REAL)\nFROM\n    pragma_page_size(),\n    pragma_page_count()\nORDER BY\n    priority,\n    statistic;\n",
  "describe": {
    "columns": [
      {
        "name": "priority",
        "ordinal": 0,
        "type_info": "Integer"
      },
      {
        "name": "type",
        "ordinal": 1,
        "type_info": "Text"
      },
      {
        "name": "statistic",
        "ordinal": 2,
        "type_info": "Text"
      },
      {
        "name": "value",
        "ordinal": 3,
        "type_info": "Float"
      }
    ],
    "parameters": {
      "Right": 0
    },
    "nullable": [
      false,
      false,
      false,
      true
    ]
  },
  "hash": "0c51f68a6dc3a43da8d955530e02acf90e2a3710690f398f9ffaa71e180f1d9e"
}
